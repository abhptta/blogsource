<form class="form-horizontal"
      role="form">
      
   <p>
    <strong>Starting Case:</strong><br/>
    Review document root folder and other fields. 
   </p>

   <div class="form-group">
      <label class="control-label col-md-2">Root Folder Path:</label>
      <div class="col-md-10">
         <input cam-variable-name="cmisSharedFolderPath" type="text"
            name="cmisSharedFolderPath" class="form-control" readonly/>
      </div>
   </div>
   
   <div class="form-group">
      <label class="control-label col-md-2">Hello Variable:</label>
      <div class="col-md-10">
         <input cam-variable-name="hello" type="text" name="hello"
            class="form-control" />
      </div>
   </div>

   <div class="form-group">
      <label class="control-label col-md-2">First Name:</label>
      <div class="col-md-10">
         <input ng-model="customer.firstname" 
                type="text" 
                name="customer.firstname"
                id="customer.firstname"
                class="form-control" />
      </div>
   </div>



   


   <script cam-script src="../assets/js/camunda-bpm-sdk-angular.js"
      type="text/javascript">
	
	//debugger;

   var variableManager = camForm.variableManager;
   //var customField = $('#customer.firstname', camForm.formElement);

	camForm.on('form-loaded', function() {
    	// tell the form SDK to fetch the variable named 'customer'
      console.log('form-loaded called');
    	camForm.variableManager.fetchVariable('customer');

  	});	

  	camForm.on('variables-fetched', function() {
    	// work with the variable (bind it to the current AngularJS $scope)
      console.log('variables-fetched called');
    	//$scope.customer = camForm.variableManager.variableValue('customer');
		//console.log('JSON Variable customer.firstname: ' + $scope.customer.firstname);
      if (angular.isDefined($scope.customer)) {
    	  console.log('customer value is  defined');
    	  console.log('customer value before fetch: ' + $scope.customer.firstname);
      } else {
    	  console.log('customer value is not  defined');
      }
      
      $scope.customer = camForm.variableManager.variableValue('customer');
      console.log('customer value after fetch: ' + $scope.customer.firstname);
      
  	});

	camForm.on('variables-applied', function() {
     // handle variables applied
	  console.log('variables-applied called');
     console.log('variables-applied - customer.firstname: ' + $scope.customer.firstname);
   });
		
   
	camForm.on('variables-stored', function() {
      // handle variables stored
      console.log('variables-stored called');
      //console.log('variables-stored before - customer.firstname: ' + $scope.customer.firstname);
      console.log('variables-stored - saving customer.firstname: ' + $scope.customer.firstname);
      //camForm.variableManager.variableValue('customer',$scope.customer);
      //console.log('variables-stored after - customer.firstname: ' + $scope.customer.firstname);
      
   });

	camForm.on('store', function(evt) {
	      // handle store
	      // may prevent the store from being executed
	      //evt.storePrevented = true;
      console.log('store called');
		console.log('store called customer.firstname: ' + $scope.customer.firstname);
		camForm.variableManager.variableValue('customer',$scope.customer);
	}); 

   camForm.on('submit', function() {
      // handle variables stored
      console.log('submit called');
    });

   </script>
   
   <!-- 
   <h2> - Greetings User:  {{ userName }}</h1>
    -->
	<!--  
	<script cam-script type="text/form-script">
		$scope.showUploadArea = false;
		$scope.showUploadBtn = true;
		$scope.showProgressIndicator = false;

		var $form = $('#uploadForm');
		$('input[type="file"]', $form).change(function() {
      		var hasFile = $('input[type="file"]', $form)[0].files.length > 0;
      		if (hasFile) {
				$scope.showUploadArea = true;
			} else {
				$scope.showUploadArea = false;
			}
			$scope.$apply();
		});
		$scope.uploadFile = function(){
    		var formData = new FormData($form[0]);
			$scope.showProgressIndicator = true;
			$scope.showUploadBtn = false;
			$scope.fileUploadHelpBlockShow = false;
			$scope.fileUploadHelpBlockClass = '';

    		$.ajax({
        		url: '/camunda-invoice-cmis/rest/rest/upload',  //Server script to process data
        		type: 'POST',
				success: function(data) {
					if (data != null) {
						var response = JSON.parse(data);
						var filename = response.filename;
						$('input[name="boxfolder"]').val(response.uniqueID);
						$scope.showProgressIndicator = false;
						$scope.showUploadBtn = true;

						if ($scope.uploadedDocuments != null) {
							$scope.uploadedDocuments.push({name:filename});
						} else {
							var uploadedDocuments = [];
							uploadedDocuments.push({name:filename});
							$scope.uploadedDocuments = uploadedDocuments;
						}
						$scope.$apply();
					}
				},
				data: formData,
        		//Options to tell jQuery not to process data or worry about content-type.
        		cache: false,
        		contentType: false,
        		processData: false
    		});
		};
 		camForm.on('submit', function(evt) {
			if ($scope.uploadedDocuments == null || $scope.uploadedDocuments.length<1) {
				evt.submitPrevented = true;
				$scope.fileUploadHelpBlockShow = true;
				$scope.fileUploadHelpBlockClass = 'error';
			} else {
				$scope.fileUploadHelpBlockShow = false;
				$scope.fileUploadHelpBlockClass = '';
			}
    	});
	</script>
	-->
</form>

